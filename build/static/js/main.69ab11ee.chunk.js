(this["webpackJsonpreact-blackjack"]=this["webpackJsonpreact-blackjack"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(12),c=a.n(r),i=(a(17),a(8)),u=a(3),o=a(4),d=a(5),l=a(2),h=a(7),b=a(6),v=a(9),j=a(0),p=function(e){switch(e){case"hearts":return Object(j.jsx)(v.c,{className:"Card-icon Card-icon--red"});case"spades":return Object(j.jsx)(v.d,{className:"Card-icon"});case"clubs":return Object(j.jsx)(v.a,{className:"Card-icon"});case"diamonds":return Object(j.jsx)(v.b,{className:"Card-icon Card-icon--red"});default:return""}},k=function(e){var t=0;return e.map((function(e,a){return t+=e.value})),t};function O(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function m(e){return JSON.parse(window.localStorage.getItem(e))}var f=Object(n.createContext)(),x=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).restart=function(){n.setState({isRoundActive:!1,roundNum:0,roundBet:0})},n.activateRound=function(){n.setState((function(e){return{isRoundActive:!0,roundNum:e.roundNum+1}}),(function(){return O("roundNum",n.state.roundNum)}))},n.deActivateRound=function(){n.setState({isRoundActive:!1,roundBet:0})},n.setBet=function(e){n.setState({roundBet:e})},n.state={roundNum:m("roundNum")||0,roundBet:0,isRoundActive:!1},n}return Object(d.a)(a,[{key:"render",value:function(){return Object(j.jsx)(f.Provider,{value:Object(u.a)(Object(u.a)({},this.state),{},{activateRound:this.activateRound,deActivateRound:this.deActivateRound,setBet:this.setBet,restart:this.restart}),children:this.props.children})}}]),a}(n.Component),y=function(e){return function(t){return Object(j.jsx)(f.Consumer,{children:function(a){return Object(j.jsx)(e,Object(u.a)({roundContext:a},t))}})}},C=Object(n.createContext)(),S=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setPlayerInfo=function(e,t){n.setState({playerStack:t,playerName:e},(function(){O("playerName",e),O("playerStack",t)}))},n.updateStack=function(e){n.setState((function(t){return{playerStack:t.playerStack-e}}),(function(){O("playerStack",n.state.playerStack)}))},n.setHands=function(e,t){n.setState({playerHands:e},(function(){return t&&t()}))},n.state={playerId:1,playerName:m("playerName")||"",playerStack:m("playerStack")||0,playerHands:[]},n}return Object(d.a)(a,[{key:"render",value:function(){return Object(j.jsx)(C.Provider,{value:Object(u.a)(Object(u.a)({},this.state),{},{setPlayerInfo:this.setPlayerInfo,updateStack:this.updateStack,setHands:this.setHands}),children:this.props.children})}}]),a}(n.Component),N=function(e){return function(t){return Object(j.jsx)(C.Consumer,{children:function(a){return Object(j.jsx)(e,Object(u.a)({playerContext:a},t))}})}},g=(a(19),y(function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.roundContext,t=e.roundNum,a=e.roundBet,n=e.isRoundActive;return Object(j.jsxs)("div",{className:"Round",children:[Object(j.jsxs)("p",{children:["Round number: ",t]}),Object(j.jsxs)("p",{children:["Total bet: ",a]}),Object(j.jsx)("p",{children:n?"is active":"is not active"}),Object(j.jsx)("button",{onClick:this.props.resetGame,children:"Start over!"})]})}}]),a}(n.Component)));a(20);var M=function(e){return Object(j.jsxs)("div",{className:"Card",children:[e.card.rank," of ",p(e.card.suit)," (value: ",e.card.value,")"]})},B=(a(21),function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleMove=n.handleMove.bind(Object(l.a)(n)),n}return Object(d.a)(a,[{key:"handleMove",value:function(e){e.preventDefault(),this.props.handleMove(this.props.move)}},{key:"render",value:function(){var e=this.props.move;return Object(j.jsx)("button",{className:"Move",onClick:this.handleMove,children:e})}}]),a}(n.Component)),R=(a(22),y(function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).getPossibleMoves=function(){var t=Object(i.a)(e.props.moves);e.props.hand[0].value===e.props.hand[1].value&&t.push("split");var a=e.props.hand[0].value+e.props.hand[1].value;return 9!==a&&10!==a&&11!==a||t.push("double"),t},e.handleMove=function(t){e.props.doMove(t,e.props.id)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.hand,n=t.bet,s=t.moves,r=t.done,c=t.result,i=t.winnings,u=this.props.roundContext.isRoundActive,o=s&&u?Object(j.jsx)("div",{className:"Hand-moves",children:this.getPossibleMoves().map((function(t){return Object(j.jsx)(B,{move:t,handleMove:e.handleMove},t)}))}):"";return Object(j.jsxs)("div",{className:"Hand",children:[Object(j.jsxs)("div",{className:"Hand-bet",children:["Bet: ",n]}),Object(j.jsxs)("div",{className:"Hand-cards",children:[a.map((function(e,t){return Object(j.jsx)(M,{card:e},t)})),Object(j.jsxs)("p",{className:"Hand-total",children:["Total: ",k(a)]}),Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:function(){if(!u&&r)switch(c){case"win":return"WIN: ".concat(i,"! \ud83d\ude04");case"lose":return"LOST \ud83d\ude13";case"tie":return"TIE: ".concat(i," \ud83d\ude05")}}()})})]}),o]})}}]),a}(n.Component)));a(23);var H=function(e){return Object(j.jsxs)("div",{className:"Bank",children:[Object(j.jsx)("h3",{children:"Bank"}),Object(j.jsx)("div",{className:"Bank-hand",children:Object(j.jsx)("div",{className:"Bank-cards",children:0!==e.hand.length&&Object(j.jsx)(R,{hand:e.hand,moves:!1,bet:!1})})})]})};var w=function(e){return Object(j.jsx)("button",{className:"Bet",onClick:function(){e.doBet(e.bet)},children:e.bet})},P=(a(24),y(N(function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).handleClick=function(){e.props.startRound()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.moves,a=e.bets,n=e.doBet,s=e.doMove,r=this.props.roundContext,c=r.roundBet,i=r.isRoundActive,u=this.props.playerContext,o=u.playerName,d=u.playerStack,l=u.playerHands;return Object(j.jsxs)("div",{className:"Player",children:[Object(j.jsx)("h3",{children:"Player"}),Object(j.jsxs)("div",{className:"Player-info",children:[Object(j.jsxs)("p",{className:"Player-name",children:["Name: ",o]}),Object(j.jsxs)("p",{className:"Player-stacksize",children:["Stacksize: ",d]})]}),Object(j.jsx)("div",{className:"Player-hands",children:l.map((function(e){return Object(j.jsx)(R,{id:e.id,hand:e.cards,bet:e.bet,result:e.result,done:e.done,winnings:e.winnings,moves:t,doMove:s},e.id)}))}),!i&&Object(j.jsx)("button",{className:"Player-start-round",onClick:this.handleClick,children:"Start New Round"}),i&&0===c&&Object(j.jsx)("div",{className:"Player-bets",children:a.map((function(e){return Object(j.jsx)(w,{bet:e,doBet:n},e)}))})]})}}]),a}(n.Component)))),A=a(10),G=(a(25),function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={name:"",stacksize:""},n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n.handleChange=n.handleChange.bind(Object(l.a)(n)),n}return Object(d.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.startGame(this.state.name,this.state.stacksize),this.setState({name:"",stacksize:""})}},{key:"handleChange",value:function(e){this.setState(Object(A.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return Object(j.jsxs)("form",{className:"StartGameForm",onSubmit:this.handleSubmit,children:[Object(j.jsxs)("div",{className:"StartGameForm-input",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Your name:"}),Object(j.jsx)("input",{type:"text",id:"name",name:"name",value:this.state.name,onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"StartGameForm-input",children:[Object(j.jsx)("label",{htmlFor:"stacksize",children:"Your stacksize:"}),Object(j.jsx)("input",{type:"number",id:"stacksize",name:"stacksize",min:"100",max:"2000",value:this.state.stacksize,onChange:this.handleChange})]}),Object(j.jsx)("button",{children:"Start Your Game of BlackJack!"})]})}}]),a}(n.Component)),I=[{suit:"hearts",rank:2,value:2},{suit:"hearts",rank:3,value:3},{suit:"hearts",rank:4,value:4},{suit:"hearts",rank:5,value:5},{suit:"hearts",rank:6,value:6},{suit:"hearts",rank:7,value:7},{suit:"hearts",rank:8,value:8},{suit:"hearts",rank:9,value:9},{suit:"hearts",rank:10,value:10},{suit:"hearts",rank:"J",value:10},{suit:"hearts",rank:"Q",value:10},{suit:"hearts",rank:"K",value:10},{suit:"hearts",rank:"A",value:11},{suit:"diamonds",rank:2,value:2},{suit:"diamonds",rank:3,value:3},{suit:"diamonds",rank:4,value:4},{suit:"diamonds",rank:5,value:5},{suit:"diamonds",rank:6,value:6},{suit:"diamonds",rank:7,value:7},{suit:"diamonds",rank:8,value:8},{suit:"diamonds",rank:9,value:9},{suit:"diamonds",rank:10,value:10},{suit:"diamonds",rank:"J",value:10},{suit:"diamonds",rank:"Q",value:10},{suit:"diamonds",rank:"K",value:10},{suit:"diamonds",rank:"A",value:11},{suit:"clubs",rank:2,value:2},{suit:"clubs",rank:3,value:3},{suit:"clubs",rank:4,value:4},{suit:"clubs",rank:5,value:5},{suit:"clubs",rank:6,value:6},{suit:"clubs",rank:7,value:7},{suit:"clubs",rank:8,value:8},{suit:"clubs",rank:9,value:9},{suit:"clubs",rank:10,value:10},{suit:"clubs",rank:"J",value:10},{suit:"clubs",rank:"Q",value:10},{suit:"clubs",rank:"K",value:10},{suit:"clubs",rank:"A",value:11},{suit:"spades",rank:2,value:2},{suit:"spades",rank:3,value:3},{suit:"spades",rank:4,value:4},{suit:"spades",rank:5,value:5},{suit:"spades",rank:6,value:6},{suit:"spades",rank:7,value:7},{suit:"spades",rank:8,value:8},{suit:"spades",rank:9,value:9},{suit:"spades",rank:10,value:10},{suit:"spades",rank:"J",value:10},{suit:"spades",rank:"Q",value:10},{suit:"spades",rank:"K",value:10},{suit:"spades",rank:"A",value:11}],z=[].concat(I,I,I,I,I,I),J=(a(26),z.sort((function(){return.5-Math.random()}))),E=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={deck:J,gameHasStarted:!1,bank:{hand:[]}},n.resetGame=n.resetGame.bind(Object(l.a)(n)),n.startGame=n.startGame.bind(Object(l.a)(n)),n.dealCard=n.dealCard.bind(Object(l.a)(n)),n.doMove=n.doMove.bind(Object(l.a)(n)),n.doMoveHit=n.doMoveHit.bind(Object(l.a)(n)),n.doMovePass=n.doMovePass.bind(Object(l.a)(n)),n.doMoveSplit=n.doMoveSplit.bind(Object(l.a)(n)),n.doMoveDouble=n.doMoveDouble.bind(Object(l.a)(n)),n.getBankCardsTill17=n.getBankCardsTill17.bind(Object(l.a)(n)),n.checkWinnings=n.checkWinnings.bind(Object(l.a)(n)),n.checkEndRound=n.checkEndRound.bind(Object(l.a)(n)),n.endRound=n.endRound.bind(Object(l.a)(n)),n.startRound=n.startRound.bind(Object(l.a)(n)),n.doBet=n.doBet.bind(Object(l.a)(n)),n}return Object(d.a)(a,[{key:"resetGame",value:function(){window.localStorage.clear(),this.props.playerContext.setPlayerInfo("",""),this.props.playerContext.setHands([]),this.props.roundContext.restart(),this.setState({gameHasStarted:!1})}},{key:"startGame",value:function(e,t){this.props.playerContext.setPlayerInfo(e,t),this.setState({gameHasStarted:!0})}},{key:"dealCard",value:function(){var e=this.state.deck,t=Math.floor(Math.random()*e.length),a=e[t];return e.splice(t,1),this.setState({deck:e}),a}},{key:"doMove",value:function(e,t){switch(e){case"hit":this.doMoveHit(t);break;case"pass":this.doMovePass(t);break;case"split":this.doMoveSplit(t);break;case"double":this.doMoveDouble(t)}}},{key:"doMoveHit",value:function(e){var t=this.dealCard(),a=this.props.playerContext.playerHands,n=a.map((function(a){return a.id===e?Object(u.a)(Object(u.a)({},a),{},{cards:[].concat(Object(i.a)(a.cards),[t])}):a}));k(n.find((function(t){return t.id===e})).cards)>21&&(n=a.map((function(a){return a.id===e?Object(u.a)(Object(u.a)({},a),{},{cards:[].concat(Object(i.a)(a.cards),[t]),done:!0,result:"lose"}):a}))),this.props.playerContext.setHands(n,this.checkEndRound)}},{key:"doMovePass",value:function(e){var t=this.props.playerContext.playerHands.map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{done:!0}):t}));this.props.playerContext.setHands(t,this.checkEndRound)}},{key:"doMoveSplit",value:function(e){console.log("do move split")}},{key:"doMoveDouble",value:function(e){console.log("do move double")}},{key:"getBankCardsTill17",value:function(){for(var e=[],t=this.state.bank.hand[0].value;t<17;){var a=this.dealCard();e=[].concat(Object(i.a)(e),[a]),t+=a.value}return e}},{key:"checkWinnings",value:function(){var e=this.props.playerContext,t=e.playerHands,a=e.setHands,n=e.updateStack,s=t,r=k(this.state.bank.hand),c=0;s.forEach((function(e){var t=k(e.cards),a=2*e.bet,n=e.bet;null===e.result&&e.done&&(r>21?(e.result="win",e.winnings=c=a):r===t?(e.result="tie",e.winnings=c=n):r<t?(e.result="win",e.winnings=c=a):e.result="lose")})),a(s),n(c)}},{key:"checkEndRound",value:function(){this.props.playerContext.playerHands.every((function(e){return!0===e.done}))&&this.endRound()}},{key:"endRound",value:function(){var e=this;this.props.roundContext.deActivateRound();var t=this.getBankCardsTill17();this.setState((function(e){return{bank:Object(u.a)(Object(u.a)({},e.bank),{},{hand:[].concat(Object(i.a)(e.bank.hand),Object(i.a)(t))})}}),(function(){e.checkWinnings()}))}},{key:"startRound",value:function(){this.props.roundContext.activateRound(),this.props.playerContext.setHands([]),this.setState((function(e){return{bank:Object(u.a)(Object(u.a)({},e.bank),{},{hand:[]})}}))}},{key:"doBet",value:function(e){this.props.roundContext.setBet(e),this.props.playerContext.updateStack(e),this.dealFirstCards(e)}},{key:"dealFirstCards",value:function(e){var t=[this.dealCard(),this.dealCard()],a=[this.dealCard()];this.props.playerContext.setHands([{id:0,cards:t,done:!1,bet:e,result:null}]),this.setState((function(e){return{bank:Object(u.a)(Object(u.a)({},e.bank),{},{hand:a})}}))}},{key:"render",value:function(){var e=this.props,t=e.moves,a=e.bets,n=this.state.bank,s=this.props.playerContext,r=s.playerName,c=s.playerStack;return Object(j.jsxs)("div",{className:"Board",children:[Object(j.jsx)("h1",{children:"Black Jack!"}),r&&0!==c?Object(j.jsxs)("div",{children:[Object(j.jsx)(g,{resetGame:this.resetGame}),Object(j.jsx)(H,{hand:n.hand}),Object(j.jsx)("div",{className:"Board-players",children:Object(j.jsx)(P,{moves:t,bets:a,doBet:this.doBet,doMove:this.doMove,startRound:this.startRound})})]}):Object(j.jsx)(G,{startGame:this.startGame})]})}}]),a}(n.Component);E.defaultProps={bets:[10,25,50,100,200],moves:["hit","pass"]};var T=y(N(E));var F=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(x,{children:Object(j.jsx)(S,{children:Object(j.jsx)(T,{})})})})};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))}],[[27,1,2]]]);
//# sourceMappingURL=main.69ab11ee.chunk.js.map